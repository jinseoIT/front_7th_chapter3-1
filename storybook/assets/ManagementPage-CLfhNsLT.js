import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as m,R as B}from"./iframe-BSnAbuZu.js";import{B as y}from"./Button-BJAFUK_q.js";import{A as D}from"./Alert-wdN2ojnN.js";import{B as J}from"./Badge-DFHGS-C-.js";import{M as R}from"./Modal-BQ9oYp6P.js";import"./Header-DddDVWtd.js";import{T as ee}from"./Table-ac4SfsnE.js";import{F as $}from"./FormInput-CMNuvZl5.js";import{F as Y}from"./FormSelect-CH-BXiEm.js";import{F as ke}from"./FormTextarea-CE_-6P8I.js";import"./ThemeToggle-CyNm049_.js";import{a as te,F as re,b as C,c as P,d as F,e as N,g as U}from"./Form-C8ZAiCyN.js";import"./Label-CWNEERrL.js";import{o as se,b as H,s as q,a as ae}from"./schemas-CWrOn5_C.js";const ne="users_data",E=()=>{const r=localStorage.getItem(ne);return r?JSON.parse(r):[{id:1,username:"admin",email:"admin@example.com",role:"admin",status:"active",createdAt:"2024-01-01",lastLogin:"2024-01-20"},{id:2,username:"john_doe",email:"john@example.com",role:"user",status:"active",createdAt:"2024-01-05",lastLogin:"2024-01-19"},{id:3,username:"jane_smith",email:"jane@example.com",role:"moderator",status:"active",createdAt:"2024-01-10"},{id:4,username:"bob",email:"bob@example.com",role:"user",status:"suspended",createdAt:"2024-01-15"}]},K=r=>{localStorage.setItem(ne,JSON.stringify(r))},W={async getAll(){return E()},async getById(r){return E().find(t=>t.id===r)||null},async create(r){const s=E();if(s.some(n=>n.username===r.username))throw new Error("유저 이름이 이미 존재합니다.");if(s.some(n=>n.email===r.email))throw new Error("이메일이 이미 존재합니다");const t={id:Math.max(...s.map(n=>n.id),0)+1,...r,createdAt:new Date().toISOString().split("T")[0]};return s.push(t),K(s),t},async update(r,s){const t=E(),n=t.findIndex(o=>o.id===r);if(n===-1)throw new Error("유저를 찾을 수 없습니다.");if(s.username&&t.some(o=>o.username===s.username&&o.id!==r))throw new Error("유저 이름이 이미 존재합니다.");if(s.email&&t.some(o=>o.email===s.email&&o.id!==r))throw new Error("이메일이 이미 존재합니다.");return t[n]={...t[n],...s},K(t),t[n]},async delete(r){const s=E(),t=s.filter(n=>n.id!==r);if(t.length===s.length)throw new Error("유저를 찾을 수 없습니다.");K(t)},async checkUsernameAvailable(r){return!E().some(t=>t.username.toLowerCase()===r.toLowerCase())},async checkEmailAvailable(r){return!E().some(t=>t.email.toLowerCase()===r.toLowerCase())}},Ee=()=>{const[r,s]=m.useState([]),[t,n]=m.useState(!1),[o,a]=m.useState(null),h=async()=>{n(!0),a(null);try{const p=await W.getAll();s(p)}catch(p){a(p.message||"데이터를 불러오는데 실패했습니다")}finally{n(!1)}};return m.useEffect(()=>{h()},[]),{users:r,loading:t,error:o,createUser:async p=>{a(null);try{await W.create(p),await h()}catch(x){throw a(x.message||"생성에 실패했습니다"),x}},updateUser:async(p,x)=>{a(null);try{await W.update(p,x),await h()}catch(v){throw a(v.message||"수정에 실패했습니다"),v}},deleteUser:async p=>{a(null);try{await W.delete(p),await h()}catch(x){throw a(x.message||"삭제에 실패했습니다"),x}},getStats:()=>({total:r.length,active:r.filter(p=>p.status==="active").length,inactive:r.filter(p=>p.status==="inactive").length,suspended:r.filter(p=>p.status==="suspended").length,admins:r.filter(p=>p.role==="admin").length}),reload:h}},ze=se({username:q().min(1,"사용자명을 입력하세요"),email:q().min(1,"이메일을 입력하세요").email("올바른 이메일 형식이 아닙니다"),role:H(["admin","moderator","user"]),status:H(["active","inactive","suspended"])}),Q=({formData:r,onChange:s,onSubmit:t,serverError:n})=>{const o=te({resolver:ae(ze),mode:"onSubmit",reValidateMode:"onChange",defaultValues:{username:r.username||"",email:r.email||"",role:r.role||"user",status:r.status||"active"}});return B.useEffect(()=>{const a=o.watch(h=>{s(h)});return()=>a.unsubscribe()},[o,s]),B.useEffect(()=>{n&&n.field&&(console.log("UserForm serverError:",n),console.log(`Setting error on field: ${n.field}`),o.setError(n.field,{type:"server",message:n.message}))},[n,o]),e.jsx(re,{...o,children:e.jsxs("form",{id:"user-create-form",onSubmit:o.handleSubmit(a=>{t&&t(a)}),className:"space-y-4",children:[e.jsx(C,{control:o.control,name:"username",render:({field:a})=>e.jsxs(P,{children:[e.jsx(F,{children:"사용자명"}),e.jsx(N,{children:e.jsx($,{name:a.name,value:a.value,onChange:a.onChange,placeholder:"사용자명을 입력하세요",width:"full",noWrapper:!0})}),e.jsx(U,{})]})}),e.jsx(C,{control:o.control,name:"email",render:({field:a})=>e.jsxs(P,{children:[e.jsx(F,{children:"이메일"}),e.jsx(N,{children:e.jsx($,{name:a.name,value:a.value,onChange:a.onChange,placeholder:"이메일을 입력하세요",type:"email",required:!0,width:"full",noWrapper:!0})}),e.jsx(U,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(C,{control:o.control,name:"role",render:({field:a})=>e.jsxs(P,{children:[e.jsx(F,{children:"역할"}),e.jsx(N,{children:e.jsx(Y,{name:a.name,value:a.value,onChange:a.onChange,options:[{value:"user",label:"사용자"},{value:"moderator",label:"운영자"},{value:"admin",label:"관리자"}],size:"md",noWrapper:!0})}),e.jsx(U,{})]})}),e.jsx(C,{control:o.control,name:"status",render:({field:a})=>e.jsxs(P,{children:[e.jsx(F,{children:"상태"}),e.jsx(N,{children:e.jsx(Y,{name:a.name,value:a.value,onChange:a.onChange,options:[{value:"active",label:"활성"},{value:"inactive",label:"비활성"},{value:"suspended",label:"정지"}],size:"md",noWrapper:!0})}),e.jsx(U,{})]})})]})]})})};Q.__docgenInfo={description:"",methods:[],displayName:"UserForm",props:{formData:{required:!0,tsType:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"userFormSchema"}],raw:"z.infer<typeof userFormSchema>"}],raw:"Partial<UserFormValues>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: Partial<UserFormValues>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"userFormSchema"}],raw:"z.infer<typeof userFormSchema>"}],raw:"Partial<UserFormValues>"},name:"data"}],return:{name:"void"}}},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: UserFormValues) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"userFormSchema"}],raw:"z.infer<typeof userFormSchema>"},name:"data"}],return:{name:"void"}}},description:""},serverError:{required:!1,tsType:{name:"union",raw:"{ field?: keyof UserFormValues; message: string } | null",elements:[{name:"signature",type:"object",raw:"{ field?: keyof UserFormValues; message: string }",signature:{properties:[{key:"field",value:{name:"z.infer",elements:[{name:"userFormSchema"}],raw:"z.infer<typeof userFormSchema>",required:!1}},{key:"message",value:{name:"string",required:!0}}]}},{name:"null"}]},description:""}}};const oe=({total:r,active:s,inactive:t,suspended:n,admins:o})=>e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(130px,1fr))] gap-2.5 mb-4",children:[e.jsxs("div",{className:"py-3 px-4 bg-blue-50 border border-blue-300 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"전체"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:r})]}),e.jsxs("div",{className:"py-3 px-4 bg-green-50 border border-green-300 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"활성"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:s})]}),e.jsxs("div",{className:"py-3 px-4 bg-orange-50 border border-orange-300 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"비활성"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700",children:t})]}),e.jsxs("div",{className:"py-3 px-4 bg-red-50 border border-red-300 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"정지"}),e.jsx("div",{className:"text-2xl font-bold text-red-700",children:n})]}),e.jsxs("div",{className:"py-3 px-4 bg-gray-100 border border-gray-400 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"관리자"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:o})]})]});oe.__docgenInfo={description:"",methods:[],displayName:"UserStats",props:{total:{required:!0,tsType:{name:"number"},description:""},active:{required:!0,tsType:{name:"number"},description:""},inactive:{required:!0,tsType:{name:"number"},description:""},suspended:{required:!0,tsType:{name:"number"},description:""},admins:{required:!0,tsType:{name:"number"},description:""}}};const Ae=r=>{switch(r){case"published":return{variant:"success",text:"게시됨"};case"draft":return{variant:"warning",text:"임시저장"};case"archived":return{variant:"secondary",text:"보관됨"};case"pending":return{variant:"info",text:"대기중"};case"rejected":return{variant:"danger",text:"거부됨"};default:return null}},Me=r=>{switch(r){case"admin":return{variant:"danger",text:"관리자"};case"moderator":return{variant:"warning",text:"운영자"};case"user":return{variant:"primary",text:"사용자"};default:return null}},Te=r=>{switch(r){case"active":return{variant:"success",text:"활성"};case"inactive":return{variant:"secondary",text:"비활성"};case"suspended":return{variant:"danger",text:"정지됨"};default:return null}},Ie=r=>[{key:"id",header:"ID",width:"60px"},{key:"username",header:"사용자명",width:"150px"},{key:"email",header:"이메일"},{key:"role",header:"역할",width:"120px",render:s=>{const t=Me(s);return t?e.jsx(J,{variant:t.variant,children:t.text}):String(s)}},{key:"status",header:"상태",width:"120px",render:s=>{const t=Te(s);return t?e.jsx(J,{variant:t.variant,children:t.text}):String(s)}},{key:"createdAt",header:"생성일",width:"120px"},{key:"lastLogin",header:"마지막 로그인",width:"140px",render:s=>s||"-"},{key:"actions",header:"관리",width:"200px",sortable:!1,render:(s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{size:"sm",variant:"primary",onClick:()=>r.onEdit(t),children:"수정"}),e.jsx(y,{size:"sm",variant:"danger",onClick:()=>r.onDelete(t.id),children:"삭제"})]})}],ie="posts_data",S=()=>{const r=localStorage.getItem(ie);return r?JSON.parse(r):[{id:1,title:"디자인 시스템 구축 가이드",content:"디자인 시스템은...",author:"김철수",category:"development",status:"published",views:1234,createdAt:"2024-01-15"},{id:2,title:"React 19 새로운 기능",content:"React 19에서는...",author:"이영희",category:"development",status:"published",views:856,createdAt:"2024-01-18"},{id:3,title:"TailwindCSS vs CSS-in-JS",content:"두 방식을 비교하면...",author:"박민수",category:"design",status:"draft",views:432,createdAt:"2024-01-20"},{id:4,title:"웹 접근성 체크리스트",content:"접근성을 위해서는...",author:"김철수",category:"accessibility",status:"published",views:2341,createdAt:"2024-01-22"},{id:5,title:"TypeScript 고급 타입",content:"TypeScript의 고급 타입 시스템...",author:"정수진",category:"development",status:"archived",views:567,createdAt:"2024-01-10"}]},I=r=>{localStorage.setItem(ie,JSON.stringify(r))},z={async getAll(){return S()},async getById(r){return S().find(t=>t.id===r)||null},async create(r){const s=S();if(r.title.length<5)throw new Error("Title must be at least 5 characters");const t={id:Math.max(...s.map(n=>n.id),0)+1,...r,views:0,createdAt:new Date().toISOString().split("T")[0]};return s.push(t),I(s),t},async update(r,s){const t=S(),n=t.findIndex(o=>o.id===r);if(n===-1)throw new Error("Post not found");return t[n]={...t[n],...s,updatedAt:new Date().toISOString().split("T")[0]},I(t),t[n]},async delete(r){const s=S(),t=s.filter(n=>n.id!==r);if(t.length===s.length)throw new Error("Post not found");I(t)},async publish(r){const s=S(),t=s.findIndex(n=>n.id===r);if(t===-1)throw new Error("Post not found");if(s[t].status==="published")throw new Error("Post is already published");return s[t].status="published",I(s),s[t]},async archive(r){const s=S(),t=s.findIndex(n=>n.id===r);if(t===-1)throw new Error("Post not found");return s[t].status="archived",I(s),s[t]},async restore(r){const s=S(),t=s.findIndex(n=>n.id===r);if(t===-1)throw new Error("Post not found");if(s[t].status!=="archived")throw new Error("Only archived posts can be restored");return s[t].status="published",I(s),s[t]}},qe=()=>{const[r,s]=m.useState([]),[t,n]=m.useState(!1),[o,a]=m.useState(null),h=async()=>{n(!0),a(null);try{const u=await z.getAll();s(u)}catch(u){a(u.message||"데이터를 불러오는데 실패했습니다")}finally{n(!1)}};return m.useEffect(()=>{h()},[]),{posts:r,loading:t,error:o,createPost:async u=>{a(null);try{await z.create(u),await h()}catch(l){throw a(l.message||"생성에 실패했습니다"),l}},updatePost:async(u,l)=>{a(null);try{await z.update(u,l),await h()}catch(O){throw a(O.message||"수정에 실패했습니다"),O}},deletePost:async u=>{a(null);try{await z.delete(u),await h()}catch(l){throw a(l.message||"삭제에 실패했습니다"),l}},publishPost:async u=>{a(null);try{await z.publish(u),await h()}catch(l){throw a(l.message||"게시에 실패했습니다"),l}},archivePost:async u=>{a(null);try{await z.archive(u),await h()}catch(l){throw a(l.message||"보관에 실패했습니다"),l}},restorePost:async u=>{a(null);try{await z.restore(u),await h()}catch(l){throw a(l.message||"복원에 실패했습니다"),l}},getStats:()=>({total:r.length,published:r.filter(u=>u.status==="published").length,draft:r.filter(u=>u.status==="draft").length,archived:r.filter(u=>u.status==="archived").length,totalViews:r.reduce((u,l)=>u+l.views,0)}),reload:h}},Oe=se({title:q().min(5,"제목은 최소 5자 이상이어야 합니다"),author:q().min(2,"작성자명은 최소 2자 이상이어야 합니다"),category:q().min(1,"카테고리를 선택하세요"),content:q().min(10,"내용은 최소 10자 이상이어야 합니다"),status:H(["draft","published","archived"])}),X=({formData:r,onChange:s,onSubmit:t,serverError:n})=>{const o=te({resolver:ae(Oe),mode:"onSubmit",reValidateMode:"onChange",defaultValues:{title:r.title||"",author:r.author||"",category:r.category||"",content:r.content||"",status:r.status||"draft"}});return B.useEffect(()=>{const a=o.watch(h=>{s(h)});return()=>a.unsubscribe()},[o,s]),B.useEffect(()=>{n&&n.field&&(console.log("PostForm serverError:",n),console.log(`Setting error on field: ${n.field}`),o.setError(n.field,{type:"server",message:n.message}))},[n,o]),e.jsx(re,{...o,children:e.jsxs("form",{id:"post-create-form",onSubmit:o.handleSubmit(a=>{t&&t(a)}),className:"space-y-4",children:[e.jsx(C,{control:o.control,name:"title",render:({field:a})=>e.jsxs(P,{children:[e.jsx(F,{children:"제목"}),e.jsx(N,{children:e.jsx($,{name:a.name,value:a.value,onChange:a.onChange,placeholder:"게시글 제목을 입력하세요",required:!0,width:"full",noWrapper:!0})}),e.jsx(U,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(C,{control:o.control,name:"author",render:({field:a})=>e.jsxs(P,{children:[e.jsx(F,{children:"작성자"}),e.jsx(N,{children:e.jsx($,{name:a.name,value:a.value,onChange:a.onChange,placeholder:"작성자명",required:!0,width:"full",noWrapper:!0})}),e.jsx(U,{})]})}),e.jsx(C,{control:o.control,name:"category",render:({field:a})=>e.jsxs(P,{children:[e.jsx(F,{children:"카테고리"}),e.jsx(N,{children:e.jsx(Y,{name:a.name,value:a.value,onChange:a.onChange,options:[{value:"development",label:"Development"},{value:"design",label:"Design"},{value:"accessibility",label:"Accessibility"}],placeholder:"카테고리 선택",size:"md",noWrapper:!0})}),e.jsx(U,{})]})})]}),e.jsx(C,{control:o.control,name:"content",render:({field:a})=>e.jsxs(P,{children:[e.jsx(F,{children:"내용"}),e.jsx(N,{children:e.jsx(ke,{name:a.name,value:a.value,onChange:a.onChange,placeholder:"게시글 내용을 입력하세요",rows:6,noWrapper:!0})}),e.jsx(U,{})]})})]})})};X.__docgenInfo={description:"",methods:[],displayName:"PostForm",props:{formData:{required:!0,tsType:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"postFormSchema"}],raw:"z.infer<typeof postFormSchema>"}],raw:"Partial<PostFormValues>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: Partial<PostFormValues>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"z.infer",elements:[{name:"postFormSchema"}],raw:"z.infer<typeof postFormSchema>"}],raw:"Partial<PostFormValues>"},name:"data"}],return:{name:"void"}}},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: PostFormValues) => void",signature:{arguments:[{type:{name:"z.infer",elements:[{name:"postFormSchema"}],raw:"z.infer<typeof postFormSchema>"},name:"data"}],return:{name:"void"}}},description:""},serverError:{required:!1,tsType:{name:"union",raw:"{ field?: keyof PostFormValues; message: string } | null",elements:[{name:"signature",type:"object",raw:"{ field?: keyof PostFormValues; message: string }",signature:{properties:[{key:"field",value:{name:"z.infer",elements:[{name:"postFormSchema"}],raw:"z.infer<typeof postFormSchema>",required:!1}},{key:"message",value:{name:"string",required:!0}}]}},{name:"null"}]},description:""}}};const le=({total:r,published:s,draft:t,archived:n,totalViews:o})=>e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(130px,1fr))] gap-2.5 mb-4",children:[e.jsxs("div",{className:"py-3 px-4 bg-blue-50 border border-blue-300 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"전체"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:r})]}),e.jsxs("div",{className:"py-3 px-4 bg-green-50 border border-green-300 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"게시됨"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:s})]}),e.jsxs("div",{className:"py-3 px-4 bg-orange-50 border border-orange-300 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"임시저장"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700",children:t})]}),e.jsxs("div",{className:"py-3 px-4 bg-red-50 border border-red-300 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"보관됨"}),e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:n})]}),e.jsxs("div",{className:"py-3 px-4 bg-gray-100 border border-gray-400 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"총 조회수"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:o})]})]});le.__docgenInfo={description:"",methods:[],displayName:"PostStats",props:{total:{required:!0,tsType:{name:"number"},description:""},published:{required:!0,tsType:{name:"number"},description:""},draft:{required:!0,tsType:{name:"number"},description:""},archived:{required:!0,tsType:{name:"number"},description:""},totalViews:{required:!0,tsType:{name:"number"},description:""}}};const _e=r=>{switch(r){case"development":return{variant:"primary"};case"design":return{variant:"info"};case"accessibility":return{variant:"danger"};default:return{variant:"secondary"}}},Ve=r=>[{key:"id",header:"ID",width:"60px"},{key:"title",header:"제목"},{key:"author",header:"작성자",width:"120px"},{key:"category",header:"카테고리",width:"140px",render:s=>{const t=_e(s);return e.jsx(J,{variant:t.variant,pill:!0,children:String(s)})}},{key:"status",header:"상태",width:"120px",render:s=>{const t=Ae(s);return t?e.jsx(J,{variant:t.variant,children:t.text}):String(s)}},{key:"views",header:"조회수",width:"100px",render:s=>s?.toLocaleString()||"0"},{key:"createdAt",header:"작성일",width:"120px"},{key:"actions",header:"관리",width:"250px",sortable:!1,render:(s,t)=>e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(y,{size:"sm",variant:"primary",onClick:()=>r.onEdit(t),children:"수정"}),t.status==="draft"&&e.jsx(y,{size:"sm",variant:"success",onClick:()=>r.onPublish(t.id),children:"게시"}),t.status==="published"&&e.jsx(y,{size:"sm",variant:"secondary",onClick:()=>r.onArchive(t.id),children:"보관"}),t.status==="archived"&&e.jsx(y,{size:"sm",variant:"primary",onClick:()=>r.onRestore(t.id),children:"복원"}),e.jsx(y,{size:"sm",variant:"danger",onClick:()=>r.onDelete(t.id),children:"삭제"})]})}],Le=()=>{const[r,s]=m.useState("post"),t=Ee(),[n,o]=m.useState({}),[a,h]=m.useState(!1),[G,A]=m.useState(!1),[j,M]=m.useState(null),[p,x]=m.useState(null),v=qe(),[u,l]=m.useState({}),[O,_]=m.useState(!1),[ce,V]=m.useState(!1),[k,L]=m.useState(null),[Z,g]=m.useState(null),[de,b]=m.useState(!1),[ue,w]=m.useState(""),[me,T]=m.useState(!1),he=async i=>{try{x(null),await t.createUser({username:i.username,email:i.email,role:i.role,status:i.status}),h(!1),o({}),w("사용자가 생성되었습니다"),b(!0)}catch(f){const c=f?.message||t.error||"작업에 실패했습니다";console.error("User creation error:",f,c);const d=c.toLowerCase();d.includes("email")||d.includes("이메일")?x({field:"email",message:c}):d.includes("username")||d.includes("사용자명")?x({field:"username",message:c}):x({field:"username",message:c})}},pe=i=>{M(i),o({username:i.username,email:i.email,role:i.role,status:i.status}),A(!0)},xe=async i=>{if(j)try{x(null),await t.updateUser(j.id,{username:i.username,email:i.email,role:i.role,status:i.status}),A(!1),o({}),M(null),w("사용자가 수정되었습니다"),b(!0)}catch(f){const c=f?.message||t.error||"작업에 실패했습니다";console.error("User update error:",f,c);const d=c.toLowerCase();d.includes("email")||d.includes("이메일")?x({field:"email",message:c}):d.includes("username")||d.includes("사용자명")?x({field:"username",message:c}):x({field:"username",message:c})}},ge=async i=>{if(confirm("정말 삭제하시겠습니까?"))try{await t.deleteUser(i),w("삭제되었습니다"),b(!0)}catch{T(!0)}},fe=async i=>{try{g(null),await v.createPost({title:i.title,content:i.content,author:i.author,category:i.category,status:i.status}),_(!1),l({}),w("게시글이 생성되었습니다"),b(!0)}catch(f){const c=f?.message||v.error||"작업에 실패했습니다";console.error("Post creation error:",f,c);const d=c.toLowerCase();d.includes("title")||d.includes("제목")?g({field:"title",message:c}):d.includes("author")||d.includes("작성자")?g({field:"author",message:c}):d.includes("category")||d.includes("카테고리")?g({field:"category",message:c}):d.includes("content")||d.includes("내용")?g({field:"content",message:c}):g({field:"title",message:c})}},ye=i=>{L(i),l({title:i.title,content:i.content,author:i.author,category:i.category,status:i.status}),V(!0)},ve=async i=>{if(k)try{g(null),await v.updatePost(k.id,{title:i.title,content:i.content,author:i.author,category:i.category,status:i.status}),V(!1),l({}),L(null),w("게시글이 수정되었습니다"),b(!0)}catch(f){const c=f?.message||v.error||"작업에 실패했습니다";console.error("Post update error:",f,c);const d=c.toLowerCase();d.includes("title")||d.includes("제목")?g({field:"title",message:c}):d.includes("author")||d.includes("작성자")?g({field:"author",message:c}):d.includes("category")||d.includes("카테고리")?g({field:"category",message:c}):d.includes("content")||d.includes("내용")?g({field:"content",message:c}):g({field:"title",message:c})}},be=async i=>{if(confirm("정말 삭제하시겠습니까?"))try{await v.deletePost(i),w("삭제되었습니다"),b(!0)}catch{T(!0)}},we=async i=>{try{await v.publishPost(i),w("게시되었습니다"),b(!0)}catch{T(!0)}},je=async i=>{try{await v.archivePost(i),w("보관되었습니다"),b(!0)}catch{T(!0)}},Se=async i=>{try{await v.restorePost(i),w("복원되었습니다"),b(!0)}catch{T(!0)}},Ce=m.useMemo(()=>Ie({onEdit:pe,onDelete:ge}),[]),Pe=m.useMemo(()=>Ve({onEdit:ye,onDelete:be,onPublish:we,onArchive:je,onRestore:Se}),[]),Fe=t.getStats(),Ne=v.getStats(),Ue=r==="user"?t.error:v.error;return e.jsxs("div",{className:"min-h-screen transition-colors",style:{backgroundColor:"var(--color-bg-primary)"},children:[e.jsxs("div",{className:"max-w-[1200px] mx-auto p-5",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-text-heading)"},children:"관리 시스템"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"사용자와 게시글을 관리하세요"})]}),e.jsxs("div",{className:"p-2.5 transition-colors",style:{backgroundColor:"var(--color-modal-bg)",border:"1px solid var(--color-border-secondary)"},children:[e.jsxs("div",{className:"mb-4 pb-1",style:{borderBottom:"2px solid var(--color-border-tertiary)"},children:[e.jsx("button",{onClick:()=>s("post"),className:`px-4 py-2 mr-1 text-sm rounded cursor-pointer transition-colors ${r==="post"?"font-bold bg-blue-600 text-white border border-blue-600":"font-normal"}`,style:r!=="post"?{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text-body)",border:"1px solid var(--color-border-tertiary)"}:{},children:"게시글"}),e.jsx("button",{onClick:()=>s("user"),className:`px-4 py-2 text-sm rounded cursor-pointer transition-colors ${r==="user"?"font-bold bg-blue-600 text-white border border-blue-600":"font-normal"}`,style:r!=="user"?{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text-body)",border:"1px solid var(--color-border-tertiary)"}:{},children:"사용자"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 text-right",children:e.jsx(y,{variant:"primary",size:"md",onClick:()=>r==="user"?h(!0):_(!0),children:"새로 만들기"})}),de&&e.jsx("div",{className:"mb-2.5",children:e.jsx(D,{variant:"success",title:"성공",onClose:()=>b(!1),children:ue})}),me&&e.jsx("div",{className:"mb-2.5",children:e.jsx(D,{variant:"error",title:"오류",onClose:()=>T(!1),children:Ue||"작업에 실패했습니다"})}),r==="user"?e.jsx(oe,{...Fe}):e.jsx(le,{...Ne}),e.jsx("div",{className:"overflow-auto transition-colors",style:{border:"1px solid var(--color-table-border)",backgroundColor:"var(--color-modal-bg)"},children:r==="user"?e.jsx(ee,{columns:Ce,data:t.users,striped:!0,hover:!0}):e.jsx(ee,{columns:Pe,data:v.posts,striped:!0,hover:!0})})]})]})]}),e.jsx(R,{isOpen:a,onClose:()=>{h(!1),o({}),x(null)},title:"새 사용자 만들기",size:"large",showFooter:!0,footerContent:e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"secondary",size:"md",onClick:()=>{h(!1),o({}),x(null)},children:"취소"}),e.jsx(y,{variant:"primary",size:"md",type:"submit",form:"user-create-form",children:"생성"})]}),children:e.jsx(Q,{formData:n,onChange:o,onSubmit:he,serverError:p},"user-create")}),e.jsx(R,{isOpen:G,onClose:()=>{A(!1),o({}),M(null),x(null)},title:"사용자 수정",size:"large",showFooter:!0,footerContent:e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"secondary",size:"md",onClick:()=>{A(!1),o({}),M(null),x(null)},children:"취소"}),e.jsx(y,{variant:"primary",size:"md",type:"submit",form:"user-create-form",children:"수정 완료"})]}),children:e.jsxs("div",{children:[j&&e.jsxs(D,{variant:"info",children:["ID: ",j.id," | 생성일: ",j.createdAt]}),e.jsx(Q,{formData:n,onChange:o,onSubmit:xe,serverError:p},j?.id||"user-edit")]})}),e.jsx(R,{isOpen:O,onClose:()=>{_(!1),l({}),g(null)},title:"새 게시글 만들기",size:"large",showFooter:!0,footerContent:e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"secondary",size:"md",onClick:()=>{_(!1),l({}),g(null)},children:"취소"}),e.jsx(y,{variant:"primary",size:"md",type:"submit",form:"post-create-form",children:"생성"})]}),children:e.jsx(X,{formData:u,onChange:l,onSubmit:fe,serverError:Z},"post-create")}),e.jsx(R,{isOpen:ce,onClose:()=>{V(!1),l({}),L(null),g(null)},title:"게시글 수정",size:"large",showFooter:!0,footerContent:e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"secondary",size:"md",onClick:()=>{V(!1),l({}),L(null),g(null)},children:"취소"}),e.jsx(y,{variant:"primary",size:"md",type:"submit",form:"post-create-form",children:"수정 완료"})]}),children:e.jsxs("div",{children:[k&&e.jsxs(D,{variant:"info",children:["ID: ",k.id," | 생성일: ",k.createdAt," | 조회수: ",k.views]}),e.jsx(X,{formData:u,onChange:l,onSubmit:ve,serverError:Z},k?.id||"post-edit")]})})]})};Le.__docgenInfo={description:"",methods:[],displayName:"ManagementPage"};export{Le as M};
